/* Modal Base Styles */

/* 
 * IMPORTANT: Do NOT set pointer-events: none on .modal
 * Bootstrap 5.1.3 handles modal click handling correctly out of the box.
 * The modal backdrop is a SEPARATE element (.modal-backdrop) that Bootstrap manages.
 * 
 * The .modal is position: fixed and covers the viewport.
 * Bootstrap sets pointer-events: none on .modal-dialog by default.
 * Bootstrap sets pointer-events: auto on .modal-content by default.
 * 
 * DO NOT OVERRIDE THESE unless absolutely necessary.
 */

/* ============================================
   BACKDROP REMOVAL - Fix for UI Scale Issue
   When CSS zoom != 1, position:fixed backdrops
   with viewport units render incorrectly.
   Removing backdrop eliminates visual artifacts.
   ============================================ */
.modal-backdrop {
    display: none !important;
}

/* ============================================
   MODAL COUNTER-ZOOM - Fix for Centering
   When CSS zoom is applied to <html>, position:fixed
   elements like .modal don't center correctly.
   Counter-zoom modal to ensure proper centering.
   Uses same CSS variables as navbar counter-zoom.
   ============================================ */
@supports (zoom: 1) {
    .modal {
        zoom: var(--ui-scale-inverse, 1);
    }
}

/* Add subtle shadow to modal content to maintain visual separation */
.modal-content {
    box-shadow: 0 0 40px rgba(0, 0, 0, 0.3), 0 0 100px rgba(0, 0, 0, 0.15) !important;
}

/* ============================================
   REMOVE ALL FOCUS SHADOWS ON MOUSE CLICK
   Only show focus indicators for keyboard navigation
   ============================================ */
.modal *:focus,
.modal button:focus,
.modal input:focus,
.modal select:focus,
.modal textarea:focus,
.modal a:focus,
.modal .btn:focus,
.modal .form-control:focus,
.modal .form-select:focus,
.modal .form-check-input:focus,
.modal .form-range:focus,
.modal .btn-close:focus,
.modal .nav-link:focus,
.modal [type="checkbox"]:focus,
.modal [type="radio"]:focus,
.modal [tabindex]:focus {
    outline: none !important;
    box-shadow: none !important;
}

/* Only show focus ring for keyboard navigation (accessibility) */
.modal *:focus-visible {
    outline: 2px solid rgba(13, 110, 253, 0.5) !important;
    outline-offset: 2px !important;
    box-shadow: none !important;
}

/* Modal content styling - Glass Effect */
.modal-content {
    border-radius: 20px;
    border: 1px solid var(--glass-border, rgba(255, 255, 255, 0.3));
    background: var(--glass-bg, rgba(255, 255, 255, 0.85));
    backdrop-filter: blur(20px) saturate(180%);
    -webkit-backdrop-filter: blur(20px) saturate(180%);
    box-shadow: 0 16px 48px rgba(31, 38, 135, 0.2), var(--glass-inset, inset 0 1px 0 rgba(255, 255, 255, 0.6));
}

.modal-header {
    border-bottom: 1px solid var(--glass-border, rgba(255, 255, 255, 0.3));
    padding: 1.5rem;
    background: rgba(255, 255, 255, 0.5);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    border-top-left-radius: 20px;
    border-top-right-radius: 20px;
}

.modal-body {
    padding: 2rem;
    background: transparent;
}

.modal-footer {
    border-top: 1px solid var(--glass-border, rgba(255, 255, 255, 0.3));
    padding: 1.5rem;
    background: rgba(255, 255, 255, 0.5);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    border-bottom-left-radius: 20px;
    border-bottom-right-radius: 20px;
}

/* Insights Modal */
#insightsModal .modal-body h4,
#insightsModal .modal-body h5,
#insightsModal .modal-body h6 {
    color: #2c3e50;
    margin-top: 1.5rem;
    margin-bottom: 1rem;
}

#insightsModal .modal-body ul {
    padding-left: 1.5rem;
    margin-bottom: 1.5rem;
}

#insightsModal .modal-body li {
    margin-bottom: 0.5rem;
}

/* AI Assistant Modal */
#aiAssistantModal .modal-dialog {
    max-width: 700px;
}

#aiAssistantModal .chat-container {
    height: 400px;
    display: flex;
    flex-direction: column;
}
