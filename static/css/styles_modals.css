/* Modal Base Styles */

/* 
 * IMPORTANT: Do NOT set pointer-events: none on .modal
 * Bootstrap 5.1.3 handles modal click handling correctly out of the box.
 * The modal backdrop is a SEPARATE element (.modal-backdrop) that Bootstrap manages.
 * 
 * The .modal is position: fixed and covers the viewport.
 * Bootstrap sets pointer-events: none on .modal-dialog by default.
 * Bootstrap sets pointer-events: auto on .modal-content by default.
 * 
 * DO NOT OVERRIDE THESE unless absolutely necessary.
 */

/* ============================================
   BACKDROP REMOVAL - Fix for UI Scale Issue
   When CSS zoom != 1, position:fixed backdrops
   with viewport units render incorrectly.
   Removing backdrop eliminates visual artifacts.
   ============================================ */
.modal-backdrop {
    display: none !important;
}

/* ============================================
   MODAL COUNTER-ZOOM - Fix for Centering
   When CSS zoom is applied to <html>, position:fixed
   elements like .modal don't center correctly.
   Counter-zoom modal to ensure proper centering.
   Uses same CSS variables as navbar counter-zoom.
   ============================================ */
@supports (zoom: 1) {
    .modal {
        zoom: var(--ui-scale-inverse, 1);
    }
}

/* Add subtle shadow to modal content to maintain visual separation */
.modal-content {
    box-shadow: 0 0 40px rgba(0, 0, 0, 0.3), 0 0 100px rgba(0, 0, 0, 0.15) !important;
}

/* ============================================
   REMOVE ALL FOCUS SHADOWS ON MOUSE CLICK
   Only show focus indicators for keyboard navigation
   ============================================ */
.modal *:focus,
.modal button:focus,
.modal input:focus,
.modal select:focus,
.modal textarea:focus,
.modal a:focus,
.modal .btn:focus,
.modal .form-control:focus,
.modal .form-select:focus,
.modal .form-check-input:focus,
.modal .form-range:focus,
.modal .btn-close:focus,
.modal .nav-link:focus,
.modal [type="checkbox"]:focus,
.modal [type="radio"]:focus,
.modal [tabindex]:focus {
    outline: none !important;
    box-shadow: none !important;
}

/* Only show focus ring for keyboard navigation (accessibility) */
.modal *:focus-visible {
    outline: 2px solid rgba(13, 110, 253, 0.5) !important;
    outline-offset: 2px !important;
    box-shadow: none !important;
}

/* Modal content styling - Glass Effect */
.modal-content {
    border-radius: 20px;
    border: 1px solid var(--glass-border, rgba(255, 255, 255, 0.3));
    background: var(--glass-bg, rgba(255, 255, 255, 0.85));
    backdrop-filter: blur(20px) saturate(180%);
    -webkit-backdrop-filter: blur(20px) saturate(180%);
    box-shadow: 0 16px 48px rgba(31, 38, 135, 0.2), var(--glass-inset, inset 0 1px 0 rgba(255, 255, 255, 0.6));
}

.modal-header {
    border-bottom: 1px solid var(--glass-border, rgba(255, 255, 255, 0.3));
    padding: 1.5rem;
    background: rgba(255, 255, 255, 0.5);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    border-top-left-radius: 20px;
    border-top-right-radius: 20px;
}

.modal-body {
    padding: 2rem;
    background: transparent;
}

.modal-footer {
    border-top: 1px solid var(--glass-border, rgba(255, 255, 255, 0.3));
    padding: 1.5rem;
    background: rgba(255, 255, 255, 0.5);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    border-bottom-left-radius: 20px;
    border-bottom-right-radius: 20px;
}

/* Insights Modal */
#insightsModal .modal-body h4,
#insightsModal .modal-body h5,
#insightsModal .modal-body h6 {
    color: #2c3e50;
    margin-top: 1.5rem;
    margin-bottom: 1rem;
}

#insightsModal .modal-body ul {
    padding-left: 1.5rem;
    margin-bottom: 1.5rem;
}

#insightsModal .modal-body li {
    margin-bottom: 0.5rem;
}

/* AI Assistant Modal */
#aiAssistantModal .modal-dialog {
    max-width: 700px;
}

#aiAssistantModal .chat-container {
    height: 400px;
    display: flex;
    flex-direction: column;
}
/* ============================================
   GENERATE STARTER PLAN MODAL
   Optimized layout for 1920x1080 screens
   ============================================ */
#generatePlanModal .modal-body {
    padding: 0.75rem 1.25rem;
}

#generatePlanModal .modal-header {
    padding: 0.5rem 1.25rem;
}

#generatePlanModal .modal-footer {
    padding: 0.5rem 1.25rem;
}

/* Compact form controls for the plan generator */
#generatePlanModal .form-label {
    margin-bottom: 0.125rem;
}

#generatePlanModal .row.g-2.mb-3 {
    margin-bottom: 0.5rem !important;
}

#generatePlanModal .row.g-2.mb-2 {
    margin-bottom: 0.375rem !important;
}

/* Preview Box - Badge Style */
#generatePlanModal .plan-preview-box {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.5rem 0.75rem;
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
    border: 1px solid rgba(0, 0, 0, 0.08);
    border-radius: 8px;
}

#generatePlanModal .preview-label {
    font-weight: 600;
    font-size: 0.75rem;
    color: #6c757d;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    white-space: nowrap;
}

#generatePlanModal .preview-badges {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    align-items: center;
}

#generatePlanModal .preview-badge {
    display: inline-flex;
    align-items: center;
    padding: 0.25rem 0.625rem;
    border-radius: 20px;
    font-size: 0.75rem;
    font-weight: 500;
    white-space: nowrap;
}

#generatePlanModal .preview-badge i {
    font-size: 0.625rem;
    opacity: 0.7;
}

#generatePlanModal .preview-badge .badge-value {
    font-weight: 700;
}

#generatePlanModal .badge-routines {
    background: rgba(13, 110, 253, 0.12);
    color: #0d6efd;
}

#generatePlanModal .badge-exercises {
    background: rgba(111, 66, 193, 0.12);
    color: #6f42c1;
}

#generatePlanModal .badge-sets {
    background: rgba(25, 135, 84, 0.12);
    color: #198754;
}

#generatePlanModal .badge-reps {
    background: rgba(253, 126, 20, 0.12);
    color: #e67e22;
}

/* Compact muscle selector within this modal */
#generatePlanModal .muscle-selector-container {
    padding: 0.375rem;
}

#generatePlanModal .muscle-selector-wrapper {
    gap: 0.5rem;
}

#generatePlanModal .muscle-selector-controls {
    padding-bottom: 0.25rem;
}

#generatePlanModal .muscle-body-tabs .nav-link {
    padding: 0.25rem 0.625rem;
    font-size: 0.75rem;
}

#generatePlanModal .muscle-selector-content {
    padding: 0.5rem;
    min-height: 180px;
}

#generatePlanModal .legend-item {
    padding: 0.2rem 0.375rem;
    font-size: 0.75rem;
}

#generatePlanModal .legend-checkbox {
    width: 14px;
    height: 14px;
}

#generatePlanModal .selection-summary {
    padding: 0.375rem 0.625rem;
    margin-top: 0.375rem;
    font-size: 0.75rem;
}

/* Disclaimer in footer */
#generatePlanModal .plan-disclaimer {
    font-size: 0.6875rem;
    line-height: 1.3;
    max-width: 320px;
}

/* On larger screens, give the Options column more room to spread horizontally */
@media (min-width: 1200px) {
    #generatePlanModal .row.g-2 > [class*="col-xl-2"]:last-child {
        flex: 0 0 auto;
        width: auto;
        min-width: 280px;
    }
}

/* ============================================
   VOLUME SLIDER TEMPERATURE COLORS
   Blue (low) -> Green (optimal) -> Yellow -> Red (high)
   ============================================ */
#generatePlanModal .form-range.volume-temp {
    height: 8px;
    -webkit-appearance: none;
    appearance: none;
    background: transparent;
}

#generatePlanModal .form-range.volume-temp::-webkit-slider-runnable-track {
    height: 8px;
    border-radius: 4px;
    background: linear-gradient(to right, 
        #3498db 0%,      /* Blue - 0.6x */
        #2ecc71 25%,     /* Green - 0.95x */
        #2ecc71 35%,     /* Green - 1.1x */
        #f1c40f 50%,     /* Yellow - 1.3x */
        #e67e22 70%,     /* Orange - 1.6x */
        #e74c3c 100%     /* Red - 2.0x */
    );
}

#generatePlanModal .form-range.volume-temp::-moz-range-track {
    height: 8px;
    border-radius: 4px;
    background: linear-gradient(to right, 
        #3498db 0%, #2ecc71 25%, #2ecc71 35%, 
        #f1c40f 50%, #e67e22 70%, #e74c3c 100%
    );
}

#generatePlanModal .form-range.volume-temp::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 18px;
    height: 18px;
    border-radius: 50%;
    background: #fff;
    border: 2px solid currentColor;
    margin-top: -5px;
    cursor: pointer;
    box-shadow: 0 1px 3px rgba(0,0,0,0.2);
}

#generatePlanModal .form-range.volume-temp::-moz-range-thumb {
    width: 18px;
    height: 18px;
    border-radius: 50%;
    background: #fff;
    border: 2px solid currentColor;
    cursor: pointer;
    box-shadow: 0 1px 3px rgba(0,0,0,0.2);
}

/* Volume value text colors */
#generatePlanModal .volume-value-blue { color: #3498db; }
#generatePlanModal .volume-value-green { color: #27ae60; }
#generatePlanModal .volume-value-yellow { color: #d4a017; }
#generatePlanModal .volume-value-orange { color: #e67e22; }
#generatePlanModal .volume-value-red { color: #e74c3c; }