{% extends "base.html" %}

{% block content %}
<main id="welcome" data-page="welcome">
<div class="welcome-container">
    <!-- 1. Hero Section - Welcome to Hypertrophy Toolbox -->
    <section class="hero-section text-center mb-5" aria-labelledby="hero-heading">
        <h1 id="hero-heading" class="display-4">Welcome to Hypertrophy Toolbox</h1>
        <p class="lead">Your intelligent companion for science-based muscle building</p>
    </section>

    <!-- 2. Science Section -->
    <section class="science-section mb-5" aria-labelledby="science-heading">
        <h2 id="science-heading" class="text-center mb-4">The Science of Hypertrophy Made Simple</h2>
        <div class="developer-signature text-center">
            <p>Developed, planned, designed By: <span class="developer-name" tabindex="0" role="text">Yaakov Avihai Shai</span></p>
        </div>
        <!-- Science content here -->
    </section>

    <!-- 3. Getting Started Guide -->
    <section class="guide-container" aria-labelledby="getting-started-heading">
        <header class="guide-header">
            <h2 id="getting-started-heading">Getting Started Guide</h2>
            <p>Follow our step-by-step process to create, track, and optimize your personalized workout routine</p>
        </header>
        
        <!-- Volume Planning Section -->
        <div class="guide-section">
            <h3 class="section-title">1. Volume Planning</h3>
            <div class="guide-card">
                <h4>Volume Splitter</h4>
                <ul class="guide-list">
                    <li><strong>Calculate Sets:</strong> Use the Volume Splitter to determine recommended sets per muscle group</li>
                    <li><strong>Weekly Distribution:</strong> Get both weekly and per-session set recommendations</li>
                    <li><strong>Export Data:</strong> Save calculations to Excel for reference during workout planning</li>
                </ul>
            </div>
        </div>

        <!-- Building Your Workout Section -->
        <div class="guide-section">
            <h3 class="section-title">2. Building Your Workout</h3>
            <div class="row g-4">
                <div class="col-md-6">
                    <div class="guide-card">
                        <h4>Routine Selection</h4>
                        <ul class="guide-list">
                            <li><strong>Gym Routines:</strong> Full Body, Push-Pull-Legs, Upper-Lower, 2/3/4/6-Day splits</li>
                            <li><strong>Home Workouts:</strong> Optimized routines for home training</li>
                            <li><strong>Live Exercise Filter:</strong> Quick search functionality for instant results</li>
                        </ul>
                    </div>
                </div>
                
                <div class="col-md-6">
                    <div class="guide-card">
                        <h4>Exercise Parameters</h4>
                        <ul class="guide-list">
                            <li><strong>Weight & Sets:</strong> Specify working weight and number of sets</li>
                            <li><strong>Rep Range:</strong> Set minimum and maximum repetitions</li>
                            <li><strong>Intensity Metrics:</strong> Use RIR (0=failure) and RPE (1-10 scale)</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tracking & Analysis Section -->
        <div class="guide-section">
            <h3 class="section-title">3. Tracking & Analysis</h3>
            <div class="row g-4">
                <div class="col-md-6">
                    <div class="guide-card">
                        <h4>Performance Analysis</h4>
                        <ul class="guide-list">
                            <li><strong>Weekly Summary:</strong> Analyze set distribution and volume metrics</li>
                            <li><strong>Session Summary:</strong> Review individual workout performance</li>
                            <li><strong>Mirror View:</strong> Compare planned vs. actual performance</li>
                        </ul>
                    </div>
                </div>
                
                <div class="col-md-6">
                    <div class="guide-card">
                        <h4>Progression Planning</h4>
                        <ul class="guide-list">
                            <li><strong>Form Mastery:</strong> Focus on perfect exercise execution</li>
                            <li><strong>Progressive Overload:</strong> Track weight, rep, and set increases</li>
                            <li><strong>Goal Setting:</strong> Set specific targets for each exercise</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 4. How to Use Guide -->
    <section class="guide-container" aria-labelledby="how-to-use-heading">
        <header class="guide-header">
            <h2 id="how-to-use-heading">How to Use Hypertrophy Toolbox</h2>
            <p>Master your fitness journey with our comprehensive guide to building and tracking your perfect workout routine</p>
        </header>
        
        <!-- Exercise Filtering Section -->
        <div class="guide-section">
            <h3 class="section-title">Exercise Filtering</h3>
            <div class="row g-4">
                <div class="col-md-6 col-lg-4">
                    <div class="guide-card">
                        <h4>Muscle Group Filters</h4>
                        <ul class="guide-list">
                            <li><strong>Primary Muscle Group:</strong> Filter exercises by the main muscle group activated during the selected exercise.</li>
                            <li><strong>Secondary Muscle Group:</strong> Filter exercises by the secondary muscle group, which is also activated but not the primary focus.</li>
                            <li><strong>Tertiary Muscle Group:</strong> Filter exercises by the tertiary muscle group, typically stabilizers, which have a minor impact.</li>
                            <li><strong>Advanced Isolated Muscles:</strong> Use advanced filtering to target exercises by the scientific names of isolated muscle groups.</li>
                        </ul>
                    </div>
                </div>
                
                <div class="col-md-6 col-lg-4">
                    <div class="guide-card">
                        <h4>Exercise Properties</h4>
                        <ul class="guide-list">
                            <li><strong>Force:</strong> Filter exercises by force type, useful for balancing push-pull-legs programs.</li>
                            <li><strong>Equipment:</strong> Filter exercises based on available or preferred equipment.</li>
                            <li><strong>Mechanic:</strong> Filter by movement type—isolation (single joint) or compound (multiple joints).</li>
                            <li><strong>Utility:</strong> Filter by Auxiliary (complementary) or Basic (core) exercises.</li>
                        </ul>
                    </div>
                </div>
                
                <div class="col-md-6 col-lg-4">
                    <div class="guide-card">
                        <h4>Advanced Filters</h4>
                        <ul class="guide-list">
                            <li><strong>Grips:</strong> Filter exercises based on grip position used during execution.</li>
                            <li><strong>Stabilizers:</strong> Filter by stabilizer muscles activated.</li>
                            <li><strong>Synergists:</strong> Filter by muscles that assist primary movers in joint actions.</li>
                            <li><strong>Difficulty:</strong> Filter based on exercise technique complexity.</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Workout Controls Section -->
        <div class="guide-section">
            <h3 class="section-title">Workout Controls</h3>
            <div class="row g-4">
                <div class="col-md-6">
                    <div class="guide-card">
                        <h4>Basic Controls</h4>
                        <ul class="guide-list">
                            <li><strong>Add Exercise:</strong> Add selected exercise to your workout plan after completing required inputs.</li>
                            <li><strong>Apply Filters:</strong> Apply selected filters to narrow down exercise options.</li>
                            <li><strong>Clear Filters:</strong> Reset all filters to default state.</li>
                            <li><strong>Export All Tables:</strong> Download all data to Excel.</li>
                            <li><strong>Export to Workout Log:</strong> Transfer workout plan to log for progress tracking.</li>
                        </ul>
                    </div>
                </div>
                
                <div class="col-md-6">
                    <div class="guide-card">
                        <h4>Exercise Parameters</h4>
                        <ul class="guide-list">
                            <li><strong>Weight:</strong> Specify the weight for the selected exercise.</li>
                            <li><strong>Sets:</strong> Specify the number of sets to perform.</li>
                            <li><strong>RIR (Reps In Reserve):</strong> Number of reps left in the 'tank' (0-10, where 0 is failure).</li>
                            <li><strong>RPE (Rate of Perceived Exertion):</strong> Exercise intensity scale (1-10, where 10 is maximum effort).</li>
                            <li><strong>Min/Max Rep:</strong> Set the target repetition range for the exercise.</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 5. Features Grid -->
    <section class="features-grid row g-4 mb-5" aria-label="Feature highlights">
        <!-- Workout Planner -->
        <div class="col-md-6 col-lg-4">
            <div class="feature-card card h-100">
                <div class="card-body">
                    <h3 class="card-title">Workout Planner</h3>
                    <p class="card-text">
                        Create customized workout routines for different splits:
                        <ul>
                            <li>Push-Pull-Legs</li>
                            <li>Upper-Lower</li>
                            <li>Full Body</li>
                        </ul>
                        Choose exercises based on muscle groups, equipment, and difficulty levels.
                    </p>
                    <a href="{{ url_for('workout_plan.workout_plan') }}" class="btn btn-primary" aria-label="Navigate to Workout Planner">Plan Your Workout</a>
                </div>
            </div>
        </div>

        <!-- Progress Tracker -->
        <div class="col-md-6 col-lg-4">
            <div class="feature-card card h-100">
                <div class="card-body">
                    <h3 class="card-title">Progress Tracker</h3>
                    <p class="card-text">
                        Log your sets, reps, and weights to monitor growth over time.
                        Track your progressive overload and performance trends.
                    </p>
                    <a href="{{ url_for('workout_log.workout_log') }}" class="btn btn-primary" aria-label="Navigate to Progress Tracker">Track Progress</a>
                </div>
            </div>
        </div>

        <!-- Analytics Dashboard -->
        <div class="col-md-6 col-lg-4">
            <div class="feature-card card h-100">
                <div class="card-body">
                    <h3 class="card-title">Analytics Dashboard</h3>
                    <p class="card-text">
                        Visualize your progress with:
                        <ul>
                            <li>Weekly summaries</li>
                            <li>Per session analysis</li>
                            <li>Volume and intensity tracking</li>
                        </ul>
                    </p>
                    <div class="btn-group">
                        <a href="{{ url_for('weekly_summary.weekly_summary') }}" class="btn btn-primary" aria-label="Navigate to Weekly Summary">Weekly Summary</a>
                        <a href="{{ url_for('session_summary.session_summary') }}" class="btn btn-primary" aria-label="Navigate to Session Summary">Session Summary</a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Exercise Library -->
        <div class="col-md-6 col-lg-4">
            <div class="feature-card card h-100">
                <div class="card-body">
                    <h3 class="card-title">Exercise Library</h3>
                    <p class="card-text">
                        Browse an extensive library of exercises with detailed muscle activation data.
                        Filter exercises by:
                        <ul>
                            <li>Primary muscle groups</li>
                            <li>Secondary muscle groups</li>
                            <li>Tertiary muscle groups</li>
                        </ul>
                    </p>
                    <a href="{{ url_for('workout_plan.workout_plan') }}#exercise-library" class="btn btn-primary" aria-label="Navigate to Exercise Library">Explore Exercises</a>
                </div>
            </div>
        </div>

        <!-- Hypertrophy Insights -->
        <div class="col-md-6 col-lg-4">
            <div class="feature-card card h-100">
                <div class="card-body">
                    <h3 class="card-title">Hypertrophy Insights</h3>
                    <p class="card-text">
                        Science-based recommendations for:
                        <ul>
                            <li>Volume optimization</li>
                            <li>Intensity management</li>
                            <li>Recovery strategies</li>
                        </ul>
                    </p>
                    <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#insightsModal" aria-label="Open Hypertrophy Insights modal">Learn More</button>
                </div>
            </div>
        </div>

        <!-- AI Assistant -->
        <div class="col-md-6 col-lg-4">
            <div class="feature-card card h-100">
                <div class="card-body">
                    <h3 class="card-title">AI Assistant</h3>
                    <p class="card-text">
                        Let our AI guide you in:
                        <ul>
                            <li>Fine-tuning your plan</li>
                            <li>Adjusting volume and frequency</li>
                            <li>Optimizing exercise selection</li>
                        </ul>
                    </p>
                    <button class="btn btn-primary" id="ai-help-button" aria-label="Get AI Assistant help (feature under development)">Get AI Help</button>
                </div>
            </div>
        </div>
    </section>

    <!-- Erase Data Section - Only available on welcome page -->
    <section class="erase-data-section mt-5 text-center" aria-labelledby="erase-data-heading">
        <h2 id="erase-data-heading" class="visually-hidden">Data Management</h2>
        <div class="alert alert-warning mb-3" role="alert" aria-live="polite">
            <i class="fas fa-exclamation-triangle me-2" aria-hidden="true"></i>
            Warning: This action cannot be undone
        </div>
        <button id="eraseDataBtn" class="btn btn-danger btn-lg" aria-describedby="erase-data-warning" aria-label="Erase all data and start from scratch">
            <i class="fas fa-trash-alt me-2" aria-hidden="true"></i>
            Erase All Data, Start from Scratch
        </button>
    </section>
</div>
</main>

<!-- Keep the modals at the end -->
<!-- Insights Modal -->
<div class="modal fade" id="insightsModal" tabindex="-1" aria-labelledby="insightsModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="insightsModalLabel">Hypertrophy Science & Insights</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <h4>Key Training Principles for Hypertrophy</h4>
                <h5>1. Choose the Right Rep Range</h5>
                <p>All rep ranges from 5–30 reps can build muscle effectively if you apply progressive overload and train close to failure.</p>
                
                <div class="mb-4">
                    <h6>Low Reps (6–8):</h6>
                    <ul>
                        <li>Best For: Compound lifts (e.g., squats, bench press)</li>
                        <li>Benefits: Heavier loads; quicker fatigue</li>
                    </ul>
                    
                    <h6>Moderate Reps (8–12):</h6>
                    <ul>
                        <li>Best For: A versatile range for both compound and isolation movements</li>
                        <li>Benefits: Balances mechanical tension and metabolic stress</li>
                    </ul>
                    
                    <h6>High Reps (15–30):</h6>
                    <ul>
                        <li>Best For: Isolation exercises or smaller muscle groups</li>
                        <li>Benefits: Lower joint strain; emphasizes the "pump" effect</li>
                    </ul>
                </div>
                
                <h5>2. Optimal Training Volume</h5>
                <ul>
                    <li>10–20 sets per muscle group per week</li>
                    <li>Spread across 2–4 sessions per week</li>
                </ul>
                
                <h5>3. Recovery & Nutrition</h5>
                <ul>
                    <li>Protein: 1.6–2.2g per kg of bodyweight</li>
                    <li>Sleep: 7-9 hours per night</li>
                    <li>Rest between sets: 1-3 minutes</li>
                </ul>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<!-- Construction Toast -->
<div class="position-fixed bottom-0 end-0 p-3" style="z-index: 11">
    <div id="constructionToast" class="toast align-items-center text-white bg-warning border-0" role="alert" aria-live="assertive" aria-atomic="true">
        <div class="d-flex">
            <div class="toast-body">
                <i class="fas fa-hard-hat me-2"></i>
                AI Assistant feature is currently under development. Coming soon!
            </div>
            <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
        </div>
    </div>
</div>

<!-- Add this modal after your existing modals -->
<div class="modal fade" id="eraseDataModal" tabindex="-1" aria-labelledby="eraseDataModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header bg-danger text-white">
                <h5 class="modal-title" id="eraseDataModalLabel">
                    <i class="fas fa-exclamation-triangle me-2"></i>
                    Confirm Data Erasure
                </h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p class="mb-0">Are you sure you want to erase all data and start from scratch? This action cannot be undone.</p>
                <div class="alert alert-warning mt-3 mb-0">
                    <small>
                        <strong>This will delete:</strong>
                        <ul class="mb-0">
                            <li>All workout plans</li>
                            <li>All progression goals</li>
                            <li>All workout logs</li>
                            <li>All volume plans</li>
                        </ul>
                    </small>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-danger" id="confirmEraseBtn">
                    <i class="fas fa-trash-alt me-2"></i>
                    Yes, Erase Everything
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Scripts -->
<script>
document.getElementById('ai-help-button').addEventListener('click', function() {
    const toast = new bootstrap.Toast(document.getElementById('constructionToast'));
    toast.show();
});

// Remove or comment out the openAIAssistant function
// function openAIAssistant() { ... }

document.addEventListener('DOMContentLoaded', function() {
    // Erase Data functionality
    const eraseDataBtn = document.getElementById('eraseDataBtn');
    const eraseDataModal = new bootstrap.Modal(document.getElementById('eraseDataModal'));
    const confirmEraseBtn = document.getElementById('confirmEraseBtn');

    eraseDataBtn.addEventListener('click', function() {
        eraseDataModal.show();
    });

    confirmEraseBtn.addEventListener('click', async function() {
        try {
            const response = await fetch('/erase-data', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                }
            });
            
            const data = await response.json();
            
            if (data.success) {
                eraseDataModal.hide();
                const toast = new bootstrap.Toast(document.getElementById('successToast'));
                document.querySelector('#successToast .toast-body').textContent = data.message;
                toast.show();
                setTimeout(() => window.location.reload(), 2000);
            } else {
                throw new Error(data.message);
            }
        } catch (error) {
            eraseDataModal.hide();
            const toast = new bootstrap.Toast(document.getElementById('errorToast'));
            document.querySelector('#errorToast .toast-body').textContent = 
                `Failed to erase data: ${error.message}`;
            toast.show();
        }
    });
});
</script>

{% endblock %} 