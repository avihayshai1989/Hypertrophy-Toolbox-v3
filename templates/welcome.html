{% extends "base.html" %}

{% block title %}Welcome - Hypertrophy Toolbox{% endblock %}

{% block page_css %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles_welcome.css') }}">
{% endblock %}

{% block content %}
<main id="welcome" data-page="welcome">
<div class="welcome-container">
    <!-- Developer Credit Banner -->
    <div class="developer-credit-banner">
        <div class="developer-credit-inner">
            <span class="credit-prefix">Crafted with</span>
            <i class="fas fa-heart credit-heart"></i>
            <span class="credit-text">by</span>
            <a href="https://il.linkedin.com/in/avihay1989" target="_blank" rel="noopener noreferrer" class="developer-link">
                <span class="developer-name">Yaakov Avihai Shai</span>
                <i class="fab fa-linkedin"></i>
            </a>
        </div>
    </div>

    <!-- Hero Section -->
    <section class="hero-section" aria-labelledby="hero-heading">
        <div class="hero-content">
            <div class="hero-badge">
                <span class="badge-icon">✨</span>
                <span>AI-Powered Training</span>
            </div>
            <h1 id="hero-heading">Hypertrophy<br><span class="hero-accent">Toolbox</span></h1>
            <p class="hero-lead">Science-based muscle building with intelligent volume planning, effective sets tracking, and AI-driven recommendations.</p>
            <div class="hero-cta">
                <a href="{{ url_for('workout_plan.workout_plan') }}" class="btn-hero-primary">
                    <i class="fas fa-rocket"></i>
                    Start Planning
                </a>
                <a href="{{ url_for('volume_splitter.volume_splitter') }}" class="btn-hero-secondary">
                    <i class="fas fa-chart-pie"></i>
                    Volume Calculator
                </a>
            </div>
        </div>
        <div class="hero-visual">
            <div class="hero-center-icon">
                <i class="fas fa-dumbbell"></i>
            </div>
            <div class="hero-card hero-card-1">
                <div class="hero-card-icon"><i class="fas fa-magic"></i></div>
                <span>Auto Starter Plans</span>
            </div>
            <div class="hero-card hero-card-2">
                <div class="hero-card-icon"><i class="fas fa-fire-alt"></i></div>
                <span>Effective Sets</span>
            </div>
            <div class="hero-card hero-card-3">
                <div class="hero-card-icon"><i class="fas fa-link"></i></div>
                <span>Supersets</span>
            </div>
            <div class="hero-card hero-card-4">
                <div class="hero-card-icon"><i class="fas fa-level-up-alt"></i></div>
                <span>Double Progression</span>
            </div>
            <div class="hero-card hero-card-5">
                <div class="hero-card-icon"><i class="fas fa-brain"></i></div>
                <span>AI Suggestions</span>
            </div>
            <div class="hero-card hero-card-6">
                <div class="hero-card-icon"><i class="fas fa-layer-group"></i></div>
                <span>Program Library</span>
            </div>
        </div>
    </section>

    <!-- Features Bento Grid -->
    <section class="bento-grid" aria-label="Core Features">
        <!-- Main Feature: AI Volume Recommendations -->
        <article class="bento-item bento-featured" data-feature="ai">
            <div class="bento-icon-wrap">
                <i class="fas fa-brain"></i>
            </div>
            <h3>AI Volume Recommendations</h3>
            <p>Get intelligent suggestions for optimizing your training volume. Our AI analyzes your muscle group distribution and provides actionable insights for balanced development.</p>
            <ul class="bento-list">
                <li><i class="fas fa-check-circle"></i> Recovery-aware volume alerts</li>
                <li><i class="fas fa-check-circle"></i> Push-Pull-Legs balance analysis</li>
                <li><i class="fas fa-check-circle"></i> Per-session optimization tips</li>
            </ul>
            <a href="{{ url_for('volume_splitter.volume_splitter') }}" class="bento-link">
                Try Volume Splitter <i class="fas fa-arrow-right"></i>
            </a>
        </article>

        <!-- Effective Sets -->
        <article class="bento-item" data-feature="effective-sets">
            <div class="bento-icon-wrap">
                <i class="fas fa-fire-alt"></i>
            </div>
            <h3>Effective Sets</h3>
            <p>Track true hypertrophic stimulus with muscle-specific weighting. Secondary and tertiary activations are counted proportionally.</p>
            <a href="{{ url_for('weekly_summary.weekly_summary') }}" class="bento-link">
                View Summary <i class="fas fa-arrow-right"></i>
            </a>
        </article>

        <!-- Program Library -->
        <article class="bento-item" data-feature="backup">
            <div class="bento-icon-wrap">
                <i class="fas fa-layer-group"></i>
            </div>
            <h3>Program Library</h3>
            <p>Save your workout programs as snapshots. Auto-backup before data reset ensures you never lose progress.</p>
            <a href="{{ url_for('workout_plan.workout_plan') }}" class="bento-link">
                Manage Programs <i class="fas fa-arrow-right"></i>
            </a>
        </article>

        <!-- Workout Planning -->
        <article class="bento-item" data-feature="planning">
            <div class="bento-icon-wrap">
                <i class="fas fa-dumbbell"></i>
            </div>
            <h3>Workout Planning</h3>
            <p>Build custom routines with 500+ exercises. Filter by muscle, equipment, force type, and difficulty.</p>
            <div class="bento-tags">
                <span class="tag">PPL</span>
                <span class="tag">Upper/Lower</span>
                <span class="tag">Full Body</span>
                <span class="tag">Home</span>
            </div>
            <a href="{{ url_for('workout_plan.workout_plan') }}" class="bento-link">
                Plan Workout <i class="fas fa-arrow-right"></i>
            </a>
        </article>

        <!-- Progress Analytics -->
        <article class="bento-item" data-feature="analytics">
            <div class="bento-icon-wrap">
                <i class="fas fa-chart-line"></i>
            </div>
            <h3>Progress Analytics</h3>
            <p>Weekly and per-session summaries with volume classification. Track progressive overload trends.</p>
            <div class="bento-stats">
                <div class="stat">
                    <span class="stat-value">MV</span>
                    <span class="stat-label">Maintenance</span>
                </div>
                <div class="stat">
                    <span class="stat-value">MEV</span>
                    <span class="stat-label">Minimum Effective</span>
                </div>
                <div class="stat">
                    <span class="stat-value">MRV</span>
                    <span class="stat-label">Max Recoverable</span>
                </div>
            </div>
            <a href="{{ url_for('weekly_summary.weekly_summary') }}" class="bento-link">
                View Analytics <i class="fas fa-arrow-right"></i>
            </a>
        </article>

        <!-- Workout Log -->
        <article class="bento-item" data-feature="log">
            <div class="bento-icon-wrap">
                <i class="fas fa-clipboard-list"></i>
            </div>
            <h3>Workout Log</h3>
            <p>Record sets, reps, weight, RIR, and RPE. Compare planned vs. actual performance.</p>
            <a href="{{ url_for('workout_log.workout_log') }}" class="bento-link">
                Log Workout <i class="fas fa-arrow-right"></i>
            </a>
        </article>

        <!-- Auto Starter Plan Generator -->
        <article class="bento-item bento-featured" data-feature="generator">
            <div class="bento-icon-wrap">
                <i class="fas fa-magic"></i>
            </div>
            <h3>Auto Starter Plan Generator</h3>
            <p>Generate complete workout programs based on movement patterns. Just select your goal, experience level, and available days—get a science-based program instantly.</p>
            <ul class="bento-list">
                <li><i class="fas fa-check-circle"></i> Movement pattern coverage (Squat, Hinge, Push, Pull)</li>
                <li><i class="fas fa-check-circle"></i> Priority muscle reallocation</li>
                <li><i class="fas fa-check-circle"></i> Goal-sensitive exercise selection</li>
            </ul>
            <a href="{{ url_for('workout_plan.workout_plan') }}" class="bento-link">
                Generate Plan <i class="fas fa-arrow-right"></i>
            </a>
        </article>

        <!-- Movement Pattern Analysis -->
        <article class="bento-item" data-feature="patterns">
            <div class="bento-icon-wrap">
                <i class="fas fa-balance-scale-right"></i>
            </div>
            <h3>Pattern Coverage Analysis</h3>
            <p>Scan your program for movement balance. Detects missing patterns, push/pull imbalance, and isolation-to-compound ratios.</p>
            <a href="{{ url_for('workout_plan.workout_plan') }}" class="bento-link">
                Analyze Plan <i class="fas fa-arrow-right"></i>
            </a>
        </article>

        <!-- Supersets -->
        <article class="bento-item" data-feature="supersets">
            <div class="bento-icon-wrap">
                <i class="fas fa-link"></i>
            </div>
            <h3>Supersets</h3>
            <p>Link exercises to perform back-to-back. Visual color-coding with bracket connectors. Persists across saves and exports.</p>
            <div class="bento-tags">
                <span class="tag">Antagonist</span>
                <span class="tag">Pre-exhaust</span>
                <span class="tag">Compound Sets</span>
            </div>
            <a href="{{ url_for('workout_plan.workout_plan') }}" class="bento-link">
                Create Supersets <i class="fas fa-arrow-right"></i>
            </a>
        </article>

        <!-- Progression Plan -->
        <article class="bento-item" data-feature="progression">
            <div class="bento-icon-wrap">
                <i class="fas fa-level-up-alt"></i>
            </div>
            <h3>Double Progression</h3>
            <p>Smart progression suggestions based on your logged performance. Hit the top of your rep range? Time to add weight.</p>
            <ul class="bento-list">
                <li><i class="fas fa-check-circle"></i> Auto-detects when to increase weight</li>
                <li><i class="fas fa-check-circle"></i> Conservative increments for novices</li>
                <li><i class="fas fa-check-circle"></i> Failure detection with deload suggestions</li>
            </ul>
            <a href="{{ url_for('progression_plan.progression_plan') }}" class="bento-link">
                View Progressions <i class="fas fa-arrow-right"></i>
            </a>
        </article>
    </section>

    <!-- Quick Start Guide -->
    <section class="quick-start" aria-labelledby="quickstart-heading">
        <header class="quick-start-header">
            <h2 id="quickstart-heading">Quick Start</h2>
            <p>Three steps to your optimized training program</p>
        </header>
        <div class="steps-grid">
            <div class="step-card">
                <div class="step-number">1</div>
                <h4>Plan Volume</h4>
                <p>Use the Volume Splitter to set weekly sets per muscle group. Get AI suggestions for balanced training.</p>
                <a href="{{ url_for('volume_splitter.volume_splitter') }}" class="step-link">Open Splitter</a>
            </div>
            <div class="step-card">
                <div class="step-number">2</div>
                <h4>Build Routine</h4>
                <p>Select exercises for your split. Filter by equipment, force type, and target muscles.</p>
                <a href="{{ url_for('workout_plan.workout_plan') }}" class="step-link">Create Plan</a>
            </div>
            <div class="step-card">
                <div class="step-number">3</div>
                <h4>Track Progress</h4>
                <p>Log workouts and review weekly summaries. Monitor effective sets and volume trends.</p>
                <a href="{{ url_for('workout_log.workout_log') }}" class="step-link">Start Logging</a>
            </div>
        </div>
    </section>

    <!-- Science Principles Card -->
    <section class="science-card" aria-labelledby="science-heading">
        <div class="science-content">
            <h2 id="science-heading">Science-Based Training</h2>
            <p class="science-intro">Built on evidence-based hypertrophy principles from the latest research.</p>
            <div class="science-grid">
                <div class="science-item">
                    <h5><i class="fas fa-bullseye"></i> Volume Landmarks</h5>
                    <p>Science-based set ranges per muscle: Maintenance, Minimum Effective, Maximum Adaptive, and Max Recoverable Volume guide your training.</p>
                </div>
                <div class="science-item">
                    <h5><i class="fas fa-balance-scale"></i> Effective Sets</h5>
                    <p>Primary muscles get 1.0 weight, secondary 0.5, tertiary 0.25 for accurate stimulus tracking.</p>
                </div>
                <div class="science-item">
                    <h5><i class="fas fa-sync-alt"></i> Progressive Overload</h5>
                    <p>Track weight, reps, and RIR progression to ensure continuous adaptation.</p>
                </div>
                <div class="science-item">
                    <h5><i class="fas fa-clock"></i> Recovery Optimization</h5>
                    <p>Per-session volume alerts prevent junk volume and optimize recovery between sessions.</p>
                </div>
            </div>
        </div>
        <div class="science-sidebar">
            <div class="sidebar-card">
                <h5>Optimal Rep Ranges</h5>
                <div class="rep-range"><span>6-8</span> Compounds (strength bias)</div>
                <div class="rep-range"><span>8-12</span> General hypertrophy</div>
                <div class="rep-range"><span>15-20</span> Isolation / pump work</div>
            </div>
            <div class="sidebar-card">
                <h5>Weekly Volume</h5>
                <p>10-20 sets per muscle group, distributed across 2-4 sessions for optimal frequency.</p>
            </div>
        </div>
    </section>

    <!-- Data Management Section -->
    <section class="data-management" aria-labelledby="data-mgmt-heading">
        <h2 id="data-mgmt-heading" class="visually-hidden">Data Management</h2>
        <div class="data-warning">
            <i class="fas fa-exclamation-triangle"></i>
            <span>This action cannot be undone. An auto-backup will be created first.</span>
        </div>
        <button id="eraseDataBtn" class="btn-erase" aria-describedby="erase-data-warning">
            <i class="fas fa-trash-alt"></i>
            Erase All Data
        </button>
    </section>
</div>
</main>

<!-- Erase Data Modal -->
<div class="modal fade" id="eraseDataModal" tabindex="-1" aria-labelledby="eraseDataModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header bg-danger text-white">
                <h5 class="modal-title" id="eraseDataModalLabel">
                    <i class="fas fa-exclamation-triangle me-2"></i>
                    Confirm Data Erasure
                </h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p class="mb-3">Are you sure you want to erase all data? This action cannot be undone.</p>
                <div class="alert alert-warning mb-0">
                    <strong>This will delete:</strong>
                    <ul class="mb-0 mt-2">
                        <li>All workout plans</li>
                        <li>All progression goals</li>
                        <li>All workout logs</li>
                        <li>All volume plans</li>
                        <li>All Program Library backups</li>
                    </ul>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-danger" id="confirmEraseBtn">
                    <i class="fas fa-trash-alt me-2"></i>
                    Yes, Erase Everything
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Toast Notifications -->
<div class="toast-container position-fixed bottom-0 end-0 p-3">
    <div id="successToast" class="toast align-items-center text-white bg-success border-0" role="alert" aria-live="polite" aria-atomic="true">
        <div class="d-flex">
            <div class="toast-body">
                <i class="fas fa-check-circle me-2"></i>
                <span>Operation completed successfully</span>
            </div>
            <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
        </div>
    </div>
    <div id="errorToast" class="toast align-items-center text-white bg-danger border-0" role="alert" aria-live="polite" aria-atomic="true">
        <div class="d-flex">
            <div class="toast-body">
                <i class="fas fa-times-circle me-2"></i>
                <span>An error occurred</span>
            </div>
            <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const eraseDataBtn = document.getElementById('eraseDataBtn');
    const eraseDataModal = new bootstrap.Modal(document.getElementById('eraseDataModal'));
    const confirmEraseBtn = document.getElementById('confirmEraseBtn');

    eraseDataBtn.addEventListener('click', function() {
        eraseDataModal.show();
    });

    confirmEraseBtn.addEventListener('click', async function() {
        try {
            const response = await fetch('/erase-data', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' }
            });
            
            const data = await response.json();
            
            if (data.ok) {
                eraseDataModal.hide();
                const toast = new bootstrap.Toast(document.getElementById('successToast'));
                document.querySelector('#successToast .toast-body span').textContent = data.message;
                toast.show();
                setTimeout(() => window.location.reload(), 2000);
            } else {
                throw new Error(data.message);
            }
        } catch (error) {
            eraseDataModal.hide();
            const toast = new bootstrap.Toast(document.getElementById('errorToast'));
            document.querySelector('#errorToast .toast-body span').textContent = `Failed to erase data: ${error.message}`;
            toast.show();
        }
    });
});
</script>

{% endblock %} 